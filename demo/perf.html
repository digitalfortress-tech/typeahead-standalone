<!-- LOCAL TESTING -->
<link rel="stylesheet" href="./../dist/basic.css" />
<script src="./../dist/typeahead-standalone.umd.js"></script>

<!-- DISTANT TESTING -->

<!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeahead-standalone/dist/basic.css" />
<script src="https://cdn.jsdelivr.net/npm/typeahead-standalone"></script> -->


<div class="container text-center">
  <h3>
    <a href="https://www.npmjs.com/package/typeahead-standalone">Typeahead-standalone.js Performance Tests</a>
  </h3>
  <h4>Try searching for movies... There are about 30k records</h4>

  <div class="container input-container">
    <input type="search" class="search" autocomplete="off" placeholder="Search movies...">
  </div>


<!--  Everything below this line can be ignored  -->
<div>Complete Tutorial on <a href="https://digitalfortress.tech/tutorial/all-in-one-smart-search-with-typeahead-standalone/" target="_blank">Digital Fortress</a></div>
</div>

<!-- some base styling styling -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">


<style>
/* style input element */
input {
  border-radius: 4px;
  padding: 8px 10px;
  min-width: 350px;
}

/* override style for list of suggestions */
.typeahead-standalone.typeahead-example .tt-list {
  border: 1px solid #d8d8d8;
  border-radius: 4px;
  box-shadow: 0 7px 20px #00000038;
  /* adds scrollbar when necessary */
  max-height: 550px;
  overflow: auto;
}

/* override style for all templates */
.typeahead-standalone.typeahead-example .tt-list div[class^="tt-"] {
  padding: 5px 8px;
}

/* single suggestion */
.typeahead-standalone.typeahead-example .tt-list .tt-suggestion {
  border-bottom: 1px solid #d8d8d8;
}

/* style highlight */
.typeahead-standalone .tt-list .tt-suggestion .tt-highlight {
  color: #ff56c2;
}

/* style single suggestion template */
.single-item {
  height: 140px;
  display: flex;
  align-items: center;
}

.single-item img {
  height: 130px;
  width: 100px;
  border-radius: 5px;
  margin: 0 15px 0 10px;
}

.single-item .title {
  font-size: 18px;
  font-weight: bold;
  display: -webkit-inline-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-overflow: ellipsis;
  word-break: break-word;
}

.single-item .description {
  font-size: 14px;
  display: -webkit-inline-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-overflow: ellipsis;
  word-break: break-word;
  max-width: 250px;
  margin-top: 5px;
  color: #3a3a3a;
}

.single-item .date {
  margin-top: 5px;
  color: #fff;
}

/* Do not highlight the date within the suggestion */
.typeahead-standalone .tt-list .tt-suggestion .date .tt-highlight {
  font-weight: 100;
  color: #fff;
}

/* style header template and notFound template */
.typeahead-standalone .tt-header, .typeahead-standalone .tt-notFound {
  text-align: center;
  font-size: 12px;
  text-transform: uppercase;
  font-weight: bold;
  border-bottom: 1px solid #d8d8d8;
  position: sticky;
  top: 0;
  z-index: 10;
  background-color: #cf5667;
}


/* styling to ignore */
.input-container {
  padding: 15px 0;
  min-height: 300px;
}
body {
  font-size: 16px;
}
</style>

<script>
/* Initialise typeahead-standalone.js */
typeahead({
  input: document.querySelector('.search'),
  source: {
    prefetch: {
      // url: "https://raw.githubusercontent.com/digitalfortress-tech/typeahead-standalone/master/docs/assets/json/superheroes.json",
      url: "https://raw.githubusercontent.com/prust/wikipedia-movie-data/master/movies.json",
      // when: 'onFocus', // default -> 'onInit'
    },
    identifier: 'title',
    identity: (suggestion) => `${suggestion.title}${suggestion.year}`,
    dataTokens: ['year'],
  },
  debounceRemote: 200, // default -> 100ms
  highlight: true,
  className: 'typeahead-example',
  minLength: 1,
  limit: 10,
  templates: {
    header: () => 'Movies',
    notFound: () => 'Oops...Nothing Found ðŸ˜ª',
    suggestion: (item) => {
      return `${item.title} (${item.year})`;
      // return JSON.stringify(item)
    }
  },
});
</script>